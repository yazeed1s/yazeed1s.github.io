<!doctype html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="How an X11 composite shadow crossed monitor boundaries and looked like hardware failure." />
<meta
    name="keywords"
    content="yazeed, blog, alharthi, yaz, yazeed1s"
/>
<link rel="canonical" href="https://yazeed1s.github.io/posts/my-monitor-was-dying/" />

<title>Debugged a Broken Monitor (It Was a Shadow) | Yazeed&#x27;s Blog</title>
<meta property="og:site_name" content="Yazeed&#x27;s Blog" />
<meta property="og:title" content="Debugged a Broken Monitor (It Was a Shadow) | Yazeed&#x27;s Blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://yazeed1s.github.io/posts/my-monitor-was-dying/" />
<meta property="og:description" content="How an X11 composite shadow crossed monitor boundaries and looked like hardware failure." />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Debugged a Broken Monitor (It Was a Shadow)" />
<meta name="twitter:description" content="How an X11 composite shadow crossed monitor boundaries and looked like hardware failure." />

    <link rel="icon" href="&#x2F;favicon.ico" />
    
    <link rel="stylesheet" href="https://yazeed1s.github.io/font.css" />
    <link rel="stylesheet" href="https://yazeed1s.github.io/css/base.css" />

                  
    <style>
        :root {
            --nav-basis: 25

            %;

            --light-bg: #eae6deff

            ;

            --light-text: #1a1410

            ;

            --light-text-muted: #1a1410

            ;

            --light-accent: #9E4440

            ;

            --light-accent-hover: #7A3533

            ;

            --light-code-bg: #e1ded6ff

            ;

            --light-border: #abaaaaff

            ;

            --dark-bg: #303132

            ;

            --dark-text: #bebbb9ff

            ;

            --dark-text-muted: #d5d2cf

            ;

            --dark-accent: #e57665

            ;

            --dark-accent-hover: #888885

            ;

            --dark-code-bg: #282829

            ;

            --dark-border: #524f4c

            ;
        }
    </style>
    <meta name="theme-color" id="tc" />
    <script>
        (function () {
            var m = matchMedia("(prefers-color-scheme:dark)"),
                t = localStorage.theme || (m.matches ? "dark" : "light"),
                h = document.documentElement,
                c = document.getElementById("tc");
            h.className = t;
            function u() {
                c.content = getComputedStyle(h).getPropertyValue("--tc");
            }
            u();
            window.T = function () {
                t = t === "dark" ? "light" : "dark";
                localStorage.theme = t;
                h.className = t;
                u();
            };
        })();
    </script>
    
</head>

<body>
    <a href="#main" class="skip-link">Skip to content</a>
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="light" viewBox="0 0 32 32"><rect x="15" y="2" width="2" height="5"/><rect x="21.6675" y="6.8536" width="4.958" height="1.9998" transform="translate(1.5191 19.3744) rotate(-45)"/><rect x="25" y="15" width="5" height="2"/><rect x="23.1466" y="21.6675" width="1.9998" height="4.958" transform="translate(-10.0018 24.1465) rotate(-45)"/><rect x="15" y="25" width="2" height="5"/><rect x="5.3745" y="23.1466" width="4.958" height="1.9998" transform="translate(-14.7739 12.6256) rotate(-45)"/><rect x="2" y="15" width="5" height="2"/><rect x="6.8536" y="5.3745" width="1.9998" height="4.958" transform="translate(-3.253 7.8535) rotate(-45)"/><path d="M16,12a4,4,0,1,1-4,4,4.0045,4.0045,0,0,1,4-4m0-2a6,6,0,1,0,6,6,6,6,0,0,0-6-6Z"/></symbol>
<symbol id="asleep" viewBox="0 0 32 32"><path d="M13.5025,5.4136A15.0755,15.0755,0,0,0,25.096,23.6082a11.1134,11.1134,0,0,1-7.9749,3.3893c-.1385,0-.2782.0051-.4178,0A11.0944,11.0944,0,0,1,13.5025,5.4136M14.98,3a1.0024,1.0024,0,0,0-.1746.0156A13.0959,13.0959,0,0,0,16.63,28.9973c.1641.006.3282,0,.4909,0a13.0724,13.0724,0,0,0,10.702-5.5556,1.0094,1.0094,0,0,0-.7833-1.5644A13.08,13.08,0,0,1,15.8892,4.38,1.0149,1.0149,0,0,0,14.98,3Z"/></symbol>
<symbol id="rss" viewBox="0 0 32 32"><path d="M8,18c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6C14,20.7,11.3,18,8,18z M8,28c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4C12,26.2,10.2,28,8,28z"/><path d="M30,24h-2C28,13,19,4,8,4V2C20.1,2,30,11.9,30,24z"/><path d="M22,24h-2c0-6.6-5.4-12-12-12v-2C15.7,10,22,16.3,22,24z"/></symbol>
</svg>

    <header id="site-header">
        <div>
            <span class="header-brand"><a href="https://yazeed1s.github.io"><strong><span style="color: var(--accent-hover);">~/</span>Yazeed&#x27;s Blog</strong></a></span>
            <nav>
                <a href="https://yazeed1s.github.io/" >Home</a>
                <a href="https://yazeed1s.github.io/posts/"  class="active" >Posts</a>
                <a href="https://yazeed1s.github.io/projects/" >Projects</a>
                <a href="https://yazeed1s.github.io/tags/" >Tags</a>
                </nav>
            <a href="#" onclick="
                        T();
                        return false;
                    " class="theme" aria-label="Toggle theme" title="Toggle theme">
<svg><use href="#light"/></svg>
<svg><use href="#asleep"/></svg></a>
        </div>
    </header>
    <hr class="site-sep" />
    <main id="main">
<article>
    <header>
        <h1>Debugged a Broken Monitor (It Was a Shadow)</h1>
        <div class="post-meta">
            <time datetime="2026-02-01">01 Feb 2026</time>
            
            <span>How an X11 composite shadow crossed monitor boundaries and looked like hardware failure.</span>
             
            <span class="post-tags">
                <span class="post-tags-label">Tags: </span>
                
                <a href="https://yazeed1s.github.io/tags/linux">linux</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/x11">x11</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/polybar">polybar</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/picom">picom</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/debugging">debugging</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/window-manager">window manager</a>
            </span>
            
        </div>
    </header>
     <p>I bought a new dell monitor. A few days in, I noticed a dim shadow in the top-left corner. Sometimes it stretched briefly on power-on.</p>
<p>It looked <strong><em>physical</em></strong>. Like panel uniformity issues. Like backlight bleed. Like I bought a defective monitor.</p>
<hr />
<h2 id="hardware-spiral">hardware spiral</h2>
<p>when you see a corner darkening, you blame everything physical:</p>
<ul>
<li>monitor arm (did i twist the panel?)</li>
<li>backlight / diffuser</li>
<li>cable / port</li>
<li>the monitor itself</li>
</ul>
<p>I ran through the usual checks. built-in diagnostics were clean. different cables didn't help. the shadow just sat there, stable, looking like it belonged to the panel.</p>
<hr />
<h2 id="wrong-rabbit-hole">wrong rabbit hole</h2>
<p>Same day this started, I was messing with <code>tlp</code> and <code>auto-cpufreq</code>.</p>
<p>So naturally: "did I power-save my way into a broken display?". So I turned it all off. and the shadow stayed!!</p>
<p>At least now I knew it wasn't some weird power profile.</p>
<hr />
<h2 id="software-suspects">software suspects</h2>
<p>My stack started looking suspicious:</p>
<ul>
<li>custom window manager</li>
<li>x11</li>
<li>picom (shadows, damage tracking, the usual "maybe it's stale buffers")</li>
</ul>
<p>Nothing in that layer had changed recently though. No updates, no config changes. Not proof, but enough to stop me from rewriting compositor configs at 2am.</p>
<hr />
<h2 id="isolation">isolation</h2>
<p>I logged into wayland. Shadow gone. same laptop. same cable. same monitor.</p>
<p>That's when I stopped worrying about RMA. wayland wasn't "better" here, it was just a control group.</p>
<hr />
<h2 id="bisect">bisect</h2>
<p>Once I knew it was x11 and not the monitor, I thought about what actually changed.</p>
<p>I had recently updated my window manager.
Laziest possible bisect:</p>
<ul>
<li>switch to x11 -&gt; artifact returns</li>
<li>roll back WM -&gt; artifact gone</li>
</ul>
<p>This was a regression I introduced.</p>
<hr />
<h2 id="the-reveal">the reveal</h2>
<p>Turns out I didn't mess up stacking order, I actually implemented it correctly. EWMH says window types stack in a specific order, and <code>polybar</code> (type <code>_NET_WM_TYPE_DOCK</code>) now sat above basically everything.</p>
<p>I run picom with shadows. polybar now had a shadow that landed on top of other windows.</p>
<p>On firefox or any bright window near that corner, it looked exactly like panel dimming.</p>
<p>The funniest thing is that the bar wasn't even on the external monitor. Only its shadow was.</p>
<hr />
<h2 id="why-the-shadow-landed-on-the-other-monitor">why the shadow landed on the other monitor</h2>
<p>My laptop screen has polybar. External monitor doesn't.</p>
<p>But x11 treats the desktop as one big coordinate space. Monitors are just rectangles inside it:</p>
<pre class="giallo" style="color-scheme: light dark; color: light-dark(#3C3836, #D3C6AA); background-color: light-dark(#151515, #202020);"><code data-lang="shellscript"><span class="giallo-l"><span style="color: light-dark(#707943, #A9B665);">$</span><span style="color: light-dark(#906E3A, #D8A657);"> xrandr</span><span style="color: light-dark(#8C5967, #D3869B);"> -</span><span style="color: light-dark(#8C5967, #D3869B);">-listmonitors</span></span>
<span class="giallo-l"><span style="color: light-dark(#707943, #A9B665);">Monitors:</span><span style="color: light-dark(#8C5967, #D3869B);"> 2</span></span>
<span class="giallo-l"><span style="color: light-dark(#707943, #A9B665);"> 0:</span><span style="color: light-dark(#906E3A, #D8A657);"> +</span><span>*</span><span style="color: light-dark(#906E3A, #D8A657);">eDP</span><span style="color: light-dark(#906E3A, #D8A657);"> 1920/302x1200/189+0+0</span><span style="color: light-dark(#906E3A, #D8A657);">  eDP</span></span>
<span class="giallo-l"><span style="color: light-dark(#707943, #A9B665);"> 1:</span><span style="color: light-dark(#906E3A, #D8A657);"> +DisplayPort-0</span><span style="color: light-dark(#906E3A, #D8A657);"> 2560/597x1440/336+1920+0</span><span style="color: light-dark(#906E3A, #D8A657);">  DisplayPort-0</span></span></code></pre>
<p>external starts at <code>x = 1920</code>.</p>
<p>shadows don't care about monitor boundaries. just pixels in global space. if you blur something near the right edge of the laptop screen, that blur can spill into the left edge of the external monitor.</p>
<p>which is exactly where i was seeing the "hardware defect."</p>
<hr />
<h2 id="confirmation">confirmation</h2>
<h2 id="killed-polybar-dimming-gone-instantly">Killed polybar. dimming gone instantly.</h2>
<h2 id="the-fix">the fix</h2>
<p>Make sure polybar doesn't cast shadows. Fake hardware defect never came back.</p>
<hr />
<h2 id="notes">notes</h2>
<ul>
<li>this doesn't generalize to "it's always software." panels do fail. but isolating layers beats spiraling.</li>
<li>multi-monitor on x11 is one big canvas. effects don't stop at the seam unless you make them.</li>
</ul>
  
</article>
</main>
    <hr class="site-sep bottom-sep" />
    <footer class="s">
        
    </footer>
    
    <script>
        document.querySelectorAll("article img[srcset]").forEach((i) => {
            if (i.closest("a")) return;
            i.style.cursor = "pointer";
            i.onclick = () => {
                let d = document.createElement("div"),
                    s = i.srcset.split(",").pop().trim().split(" ")[0];
                d.className = "lb";
                d.innerHTML = '<img src="' + s + '">';
                document.body.style.overflow = "hidden";
                d.onclick = () => {
                    d.remove();
                    document.body.style.overflow = "";
                };
                document.body.appendChild(d);
            };
        });
    </script>
    </body>

</html>