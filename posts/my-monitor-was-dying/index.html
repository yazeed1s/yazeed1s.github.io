<!doctype html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="debugging what looked like panel failure, turned out to be a shadow from polybar crossing monitor boundaries." />
<meta
    name="keywords"
    content="yazeed, blog, alharthi, yaz, yazeed1s"
/>
<link rel="canonical" href="https://yazeed1s.github.io/posts/my-monitor-was-dying/" />

<title>My monitor was dying | Yazeed&#x27;s Blog</title>
<meta property="og:site_name" content="Yazeed&#x27;s Blog" />
<meta property="og:title" content="My monitor was dying | Yazeed&#x27;s Blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://yazeed1s.github.io/posts/my-monitor-was-dying/" />
<meta property="og:description" content="debugging what looked like panel failure, turned out to be a shadow from polybar crossing monitor boundaries." />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="My monitor was dying" />
<meta name="twitter:description" content="debugging what looked like panel failure, turned out to be a shadow from polybar crossing monitor boundaries." />

    <link rel="icon" href="&#x2F;favicon.ico" />
    
    <link rel="stylesheet" href="https://yazeed1s.github.io/font.css" />
    <link rel="stylesheet" href="https://yazeed1s.github.io/css/base.css" />

           
    
    
    

          
    
    
    
    <style>
        :root {
            --nav-basis: 25%;
            --light-bg: #eae6deff;
            --light-text: #1a1410;
            --light-text-muted: #1a1410;
            --light-accent: #9E4440;
            --light-accent-hover: #7A3533;
            --light-code-bg: #e1ded6ff;
            --light-border: #abaaaaff;
            --light-bold: #1a1410;
            --light-italic: #1a1410;
            --light-headers: #1a1410;
            --dark-bg: #303132;
            --dark-text: #bebbb9ff;
            --dark-text-muted: #d5d2cf;
            --dark-accent: #e57665;
            --dark-accent-hover: #888885;
            --dark-code-bg: #282829;
            --dark-border: #524f4c;
            --dark-bold: #d5d2cf;
            --dark-italic: #d5d2cf;
            --dark-headers: #d5d2cf;
        }
    </style>
    <meta name="theme-color" id="tc" />
    <script>
        (function () {
            var m = matchMedia("(prefers-color-scheme:dark)"),
                t = localStorage.theme || (m.matches ? "dark" : "light"),
                h = document.documentElement,
                c = document.getElementById("tc");
            h.className = t;
            function u() {
                c.content = getComputedStyle(h).getPropertyValue("--tc");
            }
            u();
            window.T = function () {
                t = t === "dark" ? "light" : "dark";
                localStorage.theme = t;
                h.className = t;
                u();
            };
        })();
    </script>
    
</head>

<body>
    <a href="#main" class="skip-link">Skip to content</a>
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="light" viewBox="0 0 32 32"><rect x="15" y="2" width="2" height="5"/><rect x="21.6675" y="6.8536" width="4.958" height="1.9998" transform="translate(1.5191 19.3744) rotate(-45)"/><rect x="25" y="15" width="5" height="2"/><rect x="23.1466" y="21.6675" width="1.9998" height="4.958" transform="translate(-10.0018 24.1465) rotate(-45)"/><rect x="15" y="25" width="2" height="5"/><rect x="5.3745" y="23.1466" width="4.958" height="1.9998" transform="translate(-14.7739 12.6256) rotate(-45)"/><rect x="2" y="15" width="5" height="2"/><rect x="6.8536" y="5.3745" width="1.9998" height="4.958" transform="translate(-3.253 7.8535) rotate(-45)"/><path d="M16,12a4,4,0,1,1-4,4,4.0045,4.0045,0,0,1,4-4m0-2a6,6,0,1,0,6,6,6,6,0,0,0-6-6Z"/></symbol>
<symbol id="asleep" viewBox="0 0 32 32"><path d="M13.5025,5.4136A15.0755,15.0755,0,0,0,25.096,23.6082a11.1134,11.1134,0,0,1-7.9749,3.3893c-.1385,0-.2782.0051-.4178,0A11.0944,11.0944,0,0,1,13.5025,5.4136M14.98,3a1.0024,1.0024,0,0,0-.1746.0156A13.0959,13.0959,0,0,0,16.63,28.9973c.1641.006.3282,0,.4909,0a13.0724,13.0724,0,0,0,10.702-5.5556,1.0094,1.0094,0,0,0-.7833-1.5644A13.08,13.08,0,0,1,15.8892,4.38,1.0149,1.0149,0,0,0,14.98,3Z"/></symbol>
<symbol id="rss" viewBox="0 0 32 32"><path d="M8,18c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6C14,20.7,11.3,18,8,18z M8,28c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4C12,26.2,10.2,28,8,28z"/><path d="M30,24h-2C28,13,19,4,8,4V2C20.1,2,30,11.9,30,24z"/><path d="M22,24h-2c0-6.6-5.4-12-12-12v-2C15.7,10,22,16.3,22,24z"/></symbol>
</svg>

    <header id="site-header">
        <div>
            <span class="header-brand"><a href="https://yazeed1s.github.io"><strong><span style="color: var(--accent-hover);">~/</span>Yazeed&#x27;s Blog</strong></a></span>
            <nav>
                <a href="https://yazeed1s.github.io/" >Home</a>
                <a href="https://yazeed1s.github.io/posts/"  class="active" >Posts</a>
                <a href="https://yazeed1s.github.io/projects/" >Projects</a>
                <a href="https://yazeed1s.github.io/tags/" >Tags</a>
                </nav>
            <a href="#" onclick="
                        T();
                        return false;
                    " class="theme" aria-label="Toggle theme" title="Toggle theme">
<svg><use href="#light"/></svg>
<svg><use href="#asleep"/></svg></a>
        </div>
    </header>
    <hr class="site-sep" />
    <main id="main">
<article>
    <header>
        <h1>My monitor was dying</h1>
        <div class="post-meta">
            <time datetime="2025-12-12">12 Dec 2025</time>
            
            <span>debugging what looked like panel failure, turned out to be a shadow from polybar crossing monitor boundaries.</span>
             
            <span class="post-tags">
                <span class="post-tags-label">Tags: </span>
                
                <a href="https://yazeed1s.github.io/tags/linux">Linux</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/x11">x11</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/picom">Picom</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/debugging">Debugging</a>
            </span>
            
        </div>
    </header>
     <p>I got a new Dell monitor and a few days in I noticed a dim shadow in the top-left corner. It looked physical. Like backlight bleed or panel uniformity issues. Like I bought a defective unit.</p>
<h2 id="blaming-hardware-first">blaming hardware first</h2>
<p>When you see corner darkening you think hardware. Did I twist the panel when mounting it? Bad cable? Backlight issue? I ran the usual checks. Built-in diagnostics were clean. Different cables didn't help. The shadow just sat there looking like it belonged to the panel.</p>
<h2 id="the-wayland-test">the wayland test</h2>
<p>I was about to start an RMA process when I thought I should at least try a different display stack. Logged into a Wayland session. Same laptop, same cable, same monitor.</p>
<p>Shadow gone.</p>
<p>So the monitor was fine. This had to be something in my X11 setup.</p>
<h2 id="what-changed">what changed</h2>
<p>I tried to think about what was different. I had updated ZWM (my window manager) a few days ago, right around when this started. Everything else was the same: same picom config, same polybar, same everything.</p>
<p>Quick test: when I rolled back the ZWM changes the shadow disappeared, and when I restored them the shadow came back.</p>
<p>So I broke something.</p>
<h2 id="finding-the-actual-cause">finding the actual cause</h2>
<p>I started killing things to narrow it down. Disabled shadows in picom. Artifact gone. So it's definitely a shadow from some window.</p>
<p>Re-enabled shadows and started killing windows one by one. When I killed polybar the shadow disappeared instantly.</p>
<p>Polybar was the source. But polybar was on my laptop screen, not on the external monitor. I wasn't even looking at my laptop.</p>
<h2 id="what-i-actually-changed-in-zwm">what I actually changed in ZWM</h2>
<p>My WM update reimplemented the stacking order logic. The old code was a mess so I rewrote it to properly follow EWMH, which specifies that window types should stack in a particular order. <code>_NET_WM_TYPE_DOCK</code> windows (like polybar) are supposed to sit above most other windows.</p>
<p>Before my fix, polybar wasn't stacked as high as the spec says it should be. After my fix, it was. And since picom draws shadows on windows, polybar's shadow was now rendering on top of other windows instead of under them.</p>
<p>When Firefox or any bright window was near that corner of the screen, the shadow overlay looked exactly like panel dimming.</p>
<h2 id="why-the-shadow-crossed-monitors">why the shadow crossed monitors</h2>
<p>X11 treats the entire desktop as one big coordinate space. Monitors are just rectangles positioned within it:</p>
<pre class="giallo" style="color-scheme: light dark; color: light-dark(#4B4B48, #D4D4C0); background-color: light-dark(#D7D5C3, #212121);"><code data-lang="shellscript"><span class="giallo-l"><span style="color: light-dark(#3C6362, #A2BD90);">$</span><span style="color: light-dark(#4A6934, #CB8B8B);"> xrandr</span><span style="color: light-dark(#784367, #CA9D7D);"> -</span><span style="color: light-dark(#784367, #CA9D7D);">-listmonitors</span></span>
<span class="giallo-l"><span style="color: light-dark(#3C6362, #A2BD90);">Monitors:</span><span style="color: light-dark(#784367, #CA9D7D);"> 2</span></span>
<span class="giallo-l"><span style="color: light-dark(#3C6362, #A2BD90);"> 0:</span><span style="color: light-dark(#4A6934, #CB8B8B);"> +</span><span style="color: light-dark(#7D4242, #D4D4C0);">*</span><span style="color: light-dark(#4A6934, #CB8B8B);">eDP</span><span style="color: light-dark(#4A6934, #CB8B8B);"> 1920/302x1200/189+0+0</span><span style="color: light-dark(#4A6934, #CB8B8B);">  eDP</span></span>
<span class="giallo-l"><span style="color: light-dark(#3C6362, #A2BD90);"> 1:</span><span style="color: light-dark(#4A6934, #CB8B8B);"> +DisplayPort-0</span><span style="color: light-dark(#4A6934, #CB8B8B);"> 2560/597x1440/336+1920+0</span><span style="color: light-dark(#4A6934, #CB8B8B);">  DisplayPort-0</span></span></code></pre>
<p>My laptop screen is at x=0. The external monitor starts at x=1920.</p>
<p>Polybar sits at the top of the laptop screen. Its shadow extends past its bounds. If that extension reaches x=1920, it bleeds into the top-left corner of the external monitor.</p>
<p>Shadows and blur effects don't know about monitor boundaries. They just work in global pixel coordinates. That's where my "hardware defect" was.</p>
<h2 id="fix">fix</h2>
<p>Added polybar to picom's shadow exclusion list. Shadow gone. Problem never came back.</p>
<h2 id="takeaway">takeaway</h2>
<p>The monitor was fine the whole time. I almost returned working hardware because of a software shadow.</p>
<p>Isolating layers is faster than spiraling through hardware returns. The Wayland test took 30 seconds and told me everything I needed to know. Also learned that X11 multi-monitor is one big canvas and compositor effects don't stop at monitor boundaries unless you explicitly make them.</p>
  
</article>
</main>
    <hr class="site-sep bottom-sep" />
    <footer class="s">
        
    </footer>
    

    <script>
        document.querySelectorAll("article img[srcset]").forEach((i) => {
            if (i.closest("a")) return;
            i.style.cursor = "pointer";
            i.onclick = () => {
                let d = document.createElement("div"),
                    s = i.srcset.split(",").pop().trim().split(" ")[0];
                d.className = "lb";
                d.innerHTML = '<img src="' + s + '">';
                document.body.style.overflow = "hidden";
                d.onclick = () => {
                    d.remove();
                    document.body.style.overflow = "";
                };
                document.body.appendChild(d);
            };
        });
    </script>
    
<button id="scroll-to-top" aria-label="Scroll to top" title="Scroll to top">â†‘</button>
<script>
    (function() {
        var btn = document.getElementById("scroll-to-top");
        if (btn) {
            window.addEventListener("scroll", function() {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    btn.classList.add("show");
                } else {
                    btn.classList.remove("show");
                }
            });
            btn.addEventListener("click", function() {
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
        }
    })();
</script>
</body>

</html>