<!doctype html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="How Infiniswap uses RDMA to swap pages to remote memory instead of disk." />
<meta
    name="keywords"
    content="yazeed, blog, alharthi, yaz, yazeed1s"
/>
<link rel="canonical" href="https://yazeed1s.github.io/posts/infiniswap/" />

<title>Infiniswap: Remote Memory Paging Over RDMA | Yazeed&#x27;s Blog</title>
<meta property="og:site_name" content="Yazeed&#x27;s Blog" />
<meta property="og:title" content="Infiniswap: Remote Memory Paging Over RDMA | Yazeed&#x27;s Blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://yazeed1s.github.io/posts/infiniswap/" />
<meta property="og:description" content="How Infiniswap uses RDMA to swap pages to remote memory instead of disk." />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Infiniswap: Remote Memory Paging Over RDMA" />
<meta name="twitter:description" content="How Infiniswap uses RDMA to swap pages to remote memory instead of disk." />

    <link rel="icon" href="&#x2F;favicon.ico" />
    
    <link rel="stylesheet" href="https://yazeed1s.github.io/font.css" />
    <link rel="stylesheet" href="https://yazeed1s.github.io/css/base.css" />

                  
    <style>
        :root {
            --nav-basis: 25

            %;

            --light-bg: #eae6deff

            ;

            --light-text: #1a1410

            ;

            --light-text-muted: #1a1410

            ;

            --light-accent: #9E4440

            ;

            --light-accent-hover: #7A3533

            ;

            --light-code-bg: #e1ded6ff

            ;

            --light-border: #abaaaaff

            ;

            --dark-bg: #303132

            ;

            --dark-text: #bebbb9ff

            ;

            --dark-text-muted: #d5d2cf

            ;

            --dark-accent: #e57665

            ;

            --dark-accent-hover: #888885

            ;

            --dark-code-bg: #282829

            ;

            --dark-border: #524f4c

            ;
        }
    </style>
    <meta name="theme-color" id="tc" />
    <script>
        (function () {
            var m = matchMedia("(prefers-color-scheme:dark)"),
                t = localStorage.theme || (m.matches ? "dark" : "light"),
                h = document.documentElement,
                c = document.getElementById("tc");
            h.className = t;
            function u() {
                c.content = getComputedStyle(h).getPropertyValue("--tc");
            }
            u();
            window.T = function () {
                t = t === "dark" ? "light" : "dark";
                localStorage.theme = t;
                h.className = t;
                u();
            };
        })();
    </script>
    
</head>

<body>
    <a href="#main" class="skip-link">Skip to content</a>
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none"><symbol id="light" viewBox="0 0 32 32"><rect x="15" y="2" width="2" height="5"/><rect x="21.6675" y="6.8536" width="4.958" height="1.9998" transform="translate(1.5191 19.3744) rotate(-45)"/><rect x="25" y="15" width="5" height="2"/><rect x="23.1466" y="21.6675" width="1.9998" height="4.958" transform="translate(-10.0018 24.1465) rotate(-45)"/><rect x="15" y="25" width="2" height="5"/><rect x="5.3745" y="23.1466" width="4.958" height="1.9998" transform="translate(-14.7739 12.6256) rotate(-45)"/><rect x="2" y="15" width="5" height="2"/><rect x="6.8536" y="5.3745" width="1.9998" height="4.958" transform="translate(-3.253 7.8535) rotate(-45)"/><path d="M16,12a4,4,0,1,1-4,4,4.0045,4.0045,0,0,1,4-4m0-2a6,6,0,1,0,6,6,6,6,0,0,0-6-6Z"/></symbol>
<symbol id="asleep" viewBox="0 0 32 32"><path d="M13.5025,5.4136A15.0755,15.0755,0,0,0,25.096,23.6082a11.1134,11.1134,0,0,1-7.9749,3.3893c-.1385,0-.2782.0051-.4178,0A11.0944,11.0944,0,0,1,13.5025,5.4136M14.98,3a1.0024,1.0024,0,0,0-.1746.0156A13.0959,13.0959,0,0,0,16.63,28.9973c.1641.006.3282,0,.4909,0a13.0724,13.0724,0,0,0,10.702-5.5556,1.0094,1.0094,0,0,0-.7833-1.5644A13.08,13.08,0,0,1,15.8892,4.38,1.0149,1.0149,0,0,0,14.98,3Z"/></symbol>
<symbol id="rss" viewBox="0 0 32 32"><path d="M8,18c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6C14,20.7,11.3,18,8,18z M8,28c-2.2,0-4-1.8-4-4s1.8-4,4-4s4,1.8,4,4C12,26.2,10.2,28,8,28z"/><path d="M30,24h-2C28,13,19,4,8,4V2C20.1,2,30,11.9,30,24z"/><path d="M22,24h-2c0-6.6-5.4-12-12-12v-2C15.7,10,22,16.3,22,24z"/></symbol>
</svg>

    <header id="site-header">
        <div>
            <span class="header-brand"><a href="https://yazeed1s.github.io"><strong><span style="color: var(--accent-hover);">~/</span>Yazeed&#x27;s Blog</strong></a></span>
            <nav>
                <a href="https://yazeed1s.github.io/" >Home</a>
                <a href="https://yazeed1s.github.io/posts/"  class="active" >Posts</a>
                <a href="https://yazeed1s.github.io/projects/" >Projects</a>
                <a href="https://yazeed1s.github.io/tags/" >Tags</a>
                </nav>
            <a href="#" onclick="
                        T();
                        return false;
                    " class="theme" aria-label="Toggle theme" title="Toggle theme">
<svg><use href="#light"/></svg>
<svg><use href="#asleep"/></svg></a>
        </div>
    </header>
    <hr class="site-sep" />
    <main id="main">
<article>
    <header>
        <h1>Infiniswap: Remote Memory Paging Over RDMA</h1>
        <div class="post-meta">
            <time datetime="2026-01-18">18 Jan 2026</time>
            
            <span>How Infiniswap uses RDMA to swap pages to remote memory instead of disk.</span>
             
            <span class="post-tags">
                <span class="post-tags-label">Tags: </span>
                
                <a href="https://yazeed1s.github.io/tags/memory">Memory</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/rdma">RDMA</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/paging">Paging</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/distributed-systems">Distributed Systems</a><span
                    class="tag-comma">,</span> 
                <a href="https://yazeed1s.github.io/tags/linux">Linux</a>
            </span>
            
        </div>
    </header>
     <hr />
<p>I came across this paper while looking into memory disaggregation. The idea is deceptively simple: when a machine runs out of RAM, instead of paging to disk, page to another machine's unused memory over the network.</p>
<p>What caught my attention is <em>how</em> they pulled it off; no application changes, no core kernel patching. It's a kernel module that hooks into Linux's swap path and uses remote RAM as the fast tier, with disk as fallback.</p>
<hr />
<h2 id="the-core-idea">the core idea</h2>
<p>Production clusters waste a lot of memory. Some machines are memory-starved while others sit idle. The 99th percentile machine often uses 2-3× more memory than the median. Meanwhile, over half the cluster's aggregate memory goes unused.</p>
<p>When applications can't fit their working set in RAM, performance falls off a cliff. VoltDB drops from 95K TPS to 4K TPS. Memcached's tail latency shoots up 21×. Disk is too slow to help (1000× slower than memory).</p>
<p>Infiniswap's insight: RDMA networks give you single-digit microsecond latencies. That's fast enough to make remote memory a viable swap target. Instead of page -&gt; disk, you do page -&gt; remote RAM over RDMA. The remote CPU stays out of the data movement; the RNIC does the DMA.</p>
<p>The result: swap that looks normal to Linux, but is backed by slabs of remote memory scattered across the cluster.</p>
<hr />
<h2 id="what-s-clever">what's clever</h2>
<p>A few design choices stood out:</p>
<p><strong>Using swap as the integration point.</strong> Instead of modifying the kernel's page fault handler or remapping virtual memory, Infiniswap plugs into Linux's existing swap subsystem. The kernel already knows how to page out and page back in. Infiniswap just changes where those swapped pages live. The trade-off is you're still going through the swap path (page faults, context switches, the whole thing) but you get deployment simplicity.</p>
<p><strong>One-sided RDMA.</strong> Traditional network block devices (like Mellanox's nbdX) use send/recv semantics. The remote CPU has to wake up, copy data, respond. Infiniswap uses RDMA_READ and RDMA_WRITE (the RNIC directly accesses remote memory without running remote code on the critical path). The paper shows nbdX burns multiple vCPUs on the remote side; Infiniswap largely avoids that.</p>
<p><strong>Slab-based design.</strong> Pages are grouped into 1GB slabs. Each slab maps to one remote machine. This keeps the metadata manageable (tracking millions of individual 4KB pages across the cluster would be expensive). When a slab gets "hot" (&gt;20 page I/O ops/sec), it gets mapped to remote memory. Cold slabs stay on disk.</p>
<hr />
<h2 id="where-it-works">where it works</h2>
<p>Memory-bound workloads see big wins. Memcached stays nearly flat even when only 50% of the working set fits in memory. PowerGraph runs 6.5× faster. VoltDB, while CPU-heavy, still sees 15× throughput improvement over disk.</p>
<p>The cluster memory utilization goes from 40% to 60% (that's 47% more effective use of RAM, with minimal network overhead (&lt;1% of capacity)).</p>
<h2 id="where-it-doesn-t">where it doesn't</h2>
<p>CPU-bound workloads don't benefit as much. VoltDB and Spark already run at high CPU utilization. Adding paging overhead (context switches, TLB flushes, page table walks) eats into that. Spark at 50% memory thrashes so badly it doesn't complete.</p>
<p>The fundamental limit: this isn't local memory. Page faults still happen. You're masking latency, not eliminating it. For workloads where microseconds matter deterministically, that's a problem.</p>
<hr />
<h2 id="notes">notes</h2>
<ul>
<li>Paper: <a rel="external" href="https://www.usenix.org/system/files/conference/nsdi17/nsdi17-gu.pdf">Gu et al., "Efficient Memory Disaggregation with Infiniswap", NSDI 2017</a></li>
<li>Tested on 32 machines, 56 Gbps Infiniband, 64GB RAM each</li>
<li>Slab placement uses "power of two choices" (pick two random machines, query free memory, map to the one with more headroom)</li>
<li>Slab eviction queries E+5 machines, evicts the coldest from that set (~363μs median)</li>
<li>Page-out: synchronous RDMA_WRITE + async disk write (disk is fallback if remote crashes)</li>
<li>Page-in: check bitmap -&gt; RDMA_READ if remote, else read from disk</li>
<li>Slab remapping after failure takes ~54ms (Infiniband memory registration)</li>
<li>Default headroom threshold: 8GB per machine</li>
<li>Hot slab threshold: 20 page I/O ops/sec (EWMA, α=0.2)</li>
<li>Compared to: nbdX (Mellanox), Fastswap (kernel modification), LegoOS (full OS redesign)</li>
<li>Code available on GitHub <a rel="external" href="https://github.com/SymbioticLab/Infiniswap">SymbioticLab/infiniswap</a></li>
</ul>
  
</article>
</main>
    <hr class="site-sep bottom-sep" />
    <footer class="s">
        
    </footer>
    
    <script>
        document.querySelectorAll("article img[srcset]").forEach((i) => {
            if (i.closest("a")) return;
            i.style.cursor = "pointer";
            i.onclick = () => {
                let d = document.createElement("div"),
                    s = i.srcset.split(",").pop().trim().split(" ")[0];
                d.className = "lb";
                d.innerHTML = '<img src="' + s + '">';
                document.body.style.overflow = "hidden";
                d.onclick = () => {
                    d.remove();
                    document.body.style.overflow = "";
                };
                document.body.appendChild(d);
            };
        });
    </script>
    </body>

</html>